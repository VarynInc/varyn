!function(i){"use strict";var d={version:"1.2.9"},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0;function o(e,t){var n,r,s=!1;void 0!==e&&null!=e&&""!=e||(e="localStorage");try{(s=e in i&&null!==i[e])&&t&&(n=i[e],r="commonUtilities",n.setItem(r,"1"),n.removeItem(r))}catch(e){s=!1}return s}if(d.objectToString=function(e){var t,n;if(e)for(n in t="",e)e.hasOwnProperty(n)&&(t+=(0<t.length?" ":"")+n+": "+e[n]+";");else t="null;";return t},d.arrayToString=function(e){var t,n,r;if(e&&e instanceof Array){for(n in t="[",e)void 0===(r=e[n])?r="undefined":"object"==typeof r?r=this.objectStringify(r):"array"==typeof r&&(r=this.arrayToString(r)),t+=(1<t.length?", ":"")+n+": "+r;t+="]"}else t="null";return t},d.objectStringify=function(e){var t,n=[];if(null==e)return String(e);if("function"==typeof e)n.push(e.toString());else{if("object"==typeof e){if(void 0===e.join){for(t in e)e.hasOwnProperty(t)&&n.push(t+": "+this.objectStringify(e[t]));return"{"+n.join(", ")+"}"}for(t in e)n.push(this.objectStringify(e[t]));return"["+n.join(", ")+"]"}n.push(JSON.stringify(e))}return n.join(", ")},d.queryStringToObject=function(e){var t,n=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(/\+/g," "))},s={};for(e||(e=window.location.search.substring(1));t=n.exec(e);)s[r(t[1])]=r(t[2]);return s},d.extendObject=function(){var e,t,n,r,s,o,i;if(0<arguments.length){if(n=arguments[0],1<arguments.length)for(o=0,i=(s=arguments.slice(1)).length;o<i;o++)for(e in r=s[o])t=r[e],n[e]=t}else n={};return n},d.matchInArray=function(e,t){var n,r=0;if(e&&t&&t.constructor===Array)for(n=t.length;r<n;r++)if(e.match(t[r]))return r;return-1},d.makeFullPath=function(e){return e?("/"!==e[e.length-1]&&(e+="/"),"/"!==e[0]&&(e="/"+e)):e="/",e},d.appendFileToPath=function(e,t){return e&&t?"/"!==e[e.length-1]&&"/"!==t[0]?e+="/"+t:"/"==e[e.length-1]&&"/"==t[0]?e+=t.substr(1):e+=t:t&&(e=t),e},d.tokenReplace=function(e,t){var n,r;for(n in t)t.hasOwnProperty(n)&&(r=new RegExp("{"+n+"}","g"),e=e.replace(r,t[n]));return e},d.stringTranslate=function(e,t,n){var r,s,o,i,a="";if("string"!=typeof e||e.length<1||!Array.isArray(t)||!Array.isArray(n)||t.length!=n.length)return e;for(i=e.length,r=0;r<i;r++)s=e.charAt(r),0<=(o=t.indexOf(s))&&(s=n[o]),a+=s;return a},d.isEmpty=function(e){return null==e||""===e||e instanceof Array&&0==e.length||!1===e||0===e},d.safeForHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return(""+e).replace(/[&<>"'\/]/g,function(e){return t[e]})},d.makeSafeForId=function(e){return null!==e&&0<e.length?e.replace(/-/g," ").replace(/[^\w\s]/g,"").replace(/\s\s+/g," ").replace(/\s/g,"-").toLowerCase():"number"==typeof e?e.toString():"id"},d.isMobile=function(){return d.isMobileAndroid()||d.isMobileBlackberry()||d.isMobileIos()||d.isMobileWindows()},d.isMobileAndroid=function(){return navigator.userAgent.match(/Android/i)},d.isMobileBlackberry=function(){return!!navigator.userAgent.match(/BlackBerry/i)},d.isMobileIos=function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},d.isMobileWindows=function(){return!!navigator.userAgent.match(/IEMobile/i)},d.unlockWebAudio=function(){var e=document.createElement("audio");return e.controls=!1,e.preload="auto",e.loop=!1,e.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState&&e.play()}),e},d.utf8Encode=function(e){var t,n,r="",s=e.length;for(e=e.replace(/\r\n/g,"\n"),t=0;t<s;t++)(n=e.charCodeAt(t))<128?r+=String.fromCharCode(n):(127<n&&n<2048?r+=String.fromCharCode(n>>6|192):(r+=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128)),r+=String.fromCharCode(63&n|128));return r},d.utf8Decode=function(e){for(var t,n,r,s="",o=e.length,i=0;i<o;)(t=e.charCodeAt(i))<128?(s+=String.fromCharCode(t),i++):191<t&&t<224?(n=e.charCodeAt(i+1),s+=String.fromCharCode((31&t)<<6|63&n),i+=2):(n=e.charCodeAt(i+1),r=e.charCodeAt(i+2),s+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&r),i+=3);return s},d.base64FromImageUrl=function(e,r){var t=new Image;t.src=e,t.onload=function(){var e,t=document.createElement("canvas"),n=t.getContext("2d");t.width=this.width,t.height=this.height,n.drawImage(this,0,0),e=t.toDataURL("image/png"),r(e)}},d.base64Encode=function(e){var t,n,r,s,o,i,a,u="",l=e.length,c=0;for(e=d.utf8Encode(e);c<l;)s=(t=e.charCodeAt(c++))>>2,o=(3&t)<<4|(n=e.charCodeAt(c++))>>4,i=(15&n)<<2|(r=e.charCodeAt(c++))>>6,a=63&r,isNaN(n)?i=a=64:isNaN(r)&&(a=64),u=u+g.charAt(s)+g.charAt(o)+g.charAt(i)+g.charAt(a);return u},d.base64Decode=function(e){var t,n,r,s,o,i,a="",u=e.length,l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<u;)t=g.indexOf(e.charAt(l++))<<2|(s=g.indexOf(e.charAt(l++)))>>4,n=(15&s)<<4|(o=g.indexOf(e.charAt(l++)))>>2,r=(3&o)<<6|(i=g.indexOf(e.charAt(l++))),a+=String.fromCharCode(t),64!=o&&(a+=String.fromCharCode(n)),64!=i&&(a+=String.fromCharCode(r));return d.utf8Decode(a)},d.roundTo=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},d.cookieGet=function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},d.cookieSet=function(e,t,n,r,s,o){var i="",a="; expires=Fri, 31 Dec 9999 23:59:59 GMT";if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;if("object"==typeof t&&(t=JSON.stringify(t)),n)switch(n.constructor){case Number:i=n===1/0?a:"; max-age="+n;break;case String:i="; expires="+n;break;case Date:i="; expires="+n.toUTCString();break;default:i=a}else i=a;return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+i+(s?"; domain="+s:"")+(r?"; path="+r:"")+(o?"; secure":""),!0},d.cookieRemove=function(e,t,n){return!!d.cookieExists(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},d.cookieExists=function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},d.cookieGetKeys=function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,n=0;n<t;n++)e[n]=decodeURIComponent(e[n]);return e},d.haveSessionStorage=function(){return o("sessionStorage",!0)},d.haveLocalStorage=function(){return o("localStorage",!0)},d.storageGet=function(e,t){var n,r;return void 0!==t&&null!=t||(t=i.localStorage),null!=(n=t.getItem(e))&&null==(r=JSON.parse(n))&&(r=n),r},d.saveObjectWithKey=function(e,t){var n,r,s=!1;if(o("localStorage",!1)&&null!=e)try{n=i.localStorage,null!=t?(r="object"==typeof t?JSON.stringify(t):t.toString(),n.setItem(e,r)):n.removeItem(e),s=!0}catch(e){s=!1}return s},d.loadObjectWithKey=function(e){var t,n=null;if(o("localStorage",!1)&&null!=e)try{null!=(t=i.localStorage[e])&&(n="{"==t[0]||"]"==t[0]?JSON.parse(t):t)}catch(e){n=null}return n},d.removeObjectWithKey=function(e){var t=!1;if(o("localStorage",!1)&&null!=e)try{i.localStorage.removeItem(e),t=!0}catch(e){t=!1}return t},d.shareOnFacebook=function(e,t,n,r){var s="&p[title]="+encodeURIComponent(e)+"&p[summary]="+encodeURIComponent(t)+"&p[url]="+encodeURIComponent(n)+"&p[images][0]="+encodeURIComponent(r);window.open("http://www.facebook.com/sharer.php?s=100"+s,"Share on Facebook","toolbar=no,status=0,width=626,height=436")},d.shareOnTwitter=function(e,t,n,r){var s="text="+encodeURIComponent(e)+"&url="+encodeURIComponent(t)+"&related="+n+"&hashtags="+r;window.open("https://twitter.com/intent/tweet?"+s,"Tweet","toolbar=no,status=0,width=626,height=436")},d.shareOnGoogle=function(e){window.open("https://plus.google.com/share?url="+encodeURIComponent(e),"Share on Google+","toolbar=no,status=0,width=626,height=436")},d.shareByEmail=function(e,t,n){n&&(t=t+"\n\n"+n),window.open("mailto:?subject="+encodeURIComponent(e)+"&body="+encodeURIComponent(t),"Share by Email","toolbar=no,status=0,width=626,height=436")},d.performanceTest=function(e,t,n){var r,s,o;for(a++,r=i.performance.now(),o=0;o<n;o++)e();return s=i.performance.now()-r,{testNumber:a,testFunction:t,duration:s,durationUnits:"ms",totalIterations:o}},d.MySQLDate=function(e){return null==e?e=new Date:e instanceof Date||(e=new Date(e)),e.toISOString().slice(0,10)},d.subtractYearsFromNow=function(e){var t=new Date;return t.setFullYear(t.getFullYear()-e),t},d.insertScriptElement=function(e,t){var n=document.createElement("script");void 0!==t&&null!=t&&""!=t||(t="script"),n.src=e,n.type="text/javascript",n.async=!0,document.getElementsByTagName(t)[0].appendChild(n)},d.tagParse=function(e,t){var n,r;if(null==e||e.length<1)n=null;else{for(null!=t&&""!=t||(t=";"),r=(n=e.split(t)).length-1;0<=r;r--)n[r]=d.stripTags(n[r].trim(),"").substr(0,50).trim(),n[r].length<2&&n.splice(r,1);n.length<1&&(n=null)}return n},d.stripTags=function(e,n){n=(((n||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,t){return-1<n.indexOf("<"+t.toLowerCase()+">")?e:""})},d.stringToSlug=function(e){return e.replace(/[^ \w-]/g,"").trim().replace(/\s+/g,"-").toLowerCase().substr(0,50)},d.isValidEmail=function(e){return/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()\.,;\s@\"]+\.{0,1})+([^<>()\.,;:\s@\"]{2,}|[\d\.]+))$/.test(e)},d.validateFields=function(e,t){var n,r,s,o,i,a,u=[];if(null!=e&&null!=t)for(n in t)if(t.hasOwnProperty(n))if(r=t[n],s=e[n],r.hasOwnProperty("optional")||(r.optional=!1),!r.optional&&this.isEmpty(s))u[n]={code:"required",message:"This field is required."};else if(r.hasOwnProperty("validator"))r.validator(n,s)||(u[n]={code:"validator",message:"This field failed validation."});else if(!r.optional||!this.isEmpty(s))switch(r.hasOwnProperty("type")||(r.type="string"),r.hasOwnProperty("min")||(r.min="number"==r.type?Number.MIN_SAFE_INTEGER:0),r.hasOwnProperty("max")||(r.max=Number.MAX_SAFE_INTEGER),i=r.hasOwnProperty("options")?r.options:[],r.type){case"string":s.length<r.min?u[n]={code:"min",message:"The field length is less than the minimum number of characters."}:s.length>r.max?u[n]={code:"max",message:"The field length is more than the maximum number of characters."}:0<i.length&&i.indexOf(s)<0&&(u[n]={code:"options",message:"The field value is not an option."});break;case"number":s<r.min?u[n]={code:"min",message:"The field is less than the minimum value allowed."}:s>r.max?u[n]={code:"max",message:"The field is more than the maximum value allowed."}:0<i.length&&i.indexOf(s)<0&&(u[n]={code:"options",message:"The field value is not an option."});break;case"bool":case"boolean":0<i.length&&i.indexOf(s)<0&&(u[n]={code:"options",message:"The field value is not an option."});break;case"date":s instanceof Date&&((o=s.getTime())<r.min?u[n]={code:"min",message:"The date field is before the minimum date allowed."}:o>r.max?u[n]={code:"max",message:"The date field is after the maximum date allowed."}:0<i.length&&i.indexOf(o)<0&&(u[n]={code:"options",message:"The field value is not a valid option."}));break;case"array":if(s.length<r.min)u[n]={code:"min",message:"The field contains less than the minimum number of items."};else if(s.length>r.max)u[n]={code:"max",message:"The field contains more than the maximum number of items."};else if(0<i.length)for(a=0;a<s.length;a++)if(i.indexOf(s[a])<0){u[n]={code:"options",message:"A field value is not a valid option."};break}break;case"email":this.isEmpty(s)||this.isValidEmail(s)||(u[n]={code:"invalid",message:"The email address is not valid."})}return u},d.md5=function(e){function u(e,t){return e<<t|e>>>32-t}function l(e,t){var n,r,s,o,i;return s=2147483648&e,o=2147483648&t,i=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^i^s^o:n|r?1073741824&i?3221225472^i^s^o:1073741824^i^s^o:i^s^o}function t(e,t,n,r,s,o,i){var a;return l(u(e=l(e,l(l((a=t)&n|~a&r,s),i)),o),t)}function n(e,t,n,r,s,o,i){var a;return l(u(e=l(e,l(l(t&(a=r)|n&~a,s),i)),o),t)}function r(e,t,n,r,s,o,i){return l(u(e=l(e,l(l(t^n^r,s),i)),o),t)}function s(e,t,n,r,s,o,i){return l(u(e=l(e,l(l(n^(t|~r),s),i)),o),t)}function o(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var i,a,c,d,g,f,m,V,h,p;for(i=function(e){for(var t,n=e.length,r=n+8,s=16*((r-r%64)/64+1),o=Array(s-1),i=0,a=0;a<n;)i=a%4*8,o[t=(a-a%4)/4]=o[t]|e.charCodeAt(a)<<i,a++;return i=a%4*8,o[t=(a-a%4)/4]=o[t]|128<<i,o[s-2]=n<<3,o[s-1]=n>>>29,o}(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e)),m=1732584193,V=4023233417,h=2562383102,p=271733878,a=0;a<i.length;a+=16)V=s(V=s(V=s(V=s(V=r(V=r(V=r(V=r(V=n(V=n(V=n(V=n(V=t(V=t(V=t(V=t(d=V,h=t(g=h,p=t(f=p,m=t(c=m,V,h,p,i[a+0],7,3614090360),V,h,i[a+1],12,3905402710),m,V,i[a+2],17,606105819),p,m,i[a+3],22,3250441966),h=t(h,p=t(p,m=t(m,V,h,p,i[a+4],7,4118548399),V,h,i[a+5],12,1200080426),m,V,i[a+6],17,2821735955),p,m,i[a+7],22,4249261313),h=t(h,p=t(p,m=t(m,V,h,p,i[a+8],7,1770035416),V,h,i[a+9],12,2336552879),m,V,i[a+10],17,4294925233),p,m,i[a+11],22,2304563134),h=t(h,p=t(p,m=t(m,V,h,p,i[a+12],7,1804603682),V,h,i[a+13],12,4254626195),m,V,i[a+14],17,2792965006),p,m,i[a+15],22,1236535329),h=n(h,p=n(p,m=n(m,V,h,p,i[a+1],5,4129170786),V,h,i[a+6],9,3225465664),m,V,i[a+11],14,643717713),p,m,i[a+0],20,3921069994),h=n(h,p=n(p,m=n(m,V,h,p,i[a+5],5,3593408605),V,h,i[a+10],9,38016083),m,V,i[a+15],14,3634488961),p,m,i[a+4],20,3889429448),h=n(h,p=n(p,m=n(m,V,h,p,i[a+9],5,568446438),V,h,i[a+14],9,3275163606),m,V,i[a+3],14,4107603335),p,m,i[a+8],20,1163531501),h=n(h,p=n(p,m=n(m,V,h,p,i[a+13],5,2850285829),V,h,i[a+2],9,4243563512),m,V,i[a+7],14,1735328473),p,m,i[a+12],20,2368359562),h=r(h,p=r(p,m=r(m,V,h,p,i[a+5],4,4294588738),V,h,i[a+8],11,2272392833),m,V,i[a+11],16,1839030562),p,m,i[a+14],23,4259657740),h=r(h,p=r(p,m=r(m,V,h,p,i[a+1],4,2763975236),V,h,i[a+4],11,1272893353),m,V,i[a+7],16,4139469664),p,m,i[a+10],23,3200236656),h=r(h,p=r(p,m=r(m,V,h,p,i[a+13],4,681279174),V,h,i[a+0],11,3936430074),m,V,i[a+3],16,3572445317),p,m,i[a+6],23,76029189),h=r(h,p=r(p,m=r(m,V,h,p,i[a+9],4,3654602809),V,h,i[a+12],11,3873151461),m,V,i[a+15],16,530742520),p,m,i[a+2],23,3299628645),h=s(h,p=s(p,m=s(m,V,h,p,i[a+0],6,4096336452),V,h,i[a+7],10,1126891415),m,V,i[a+14],15,2878612391),p,m,i[a+5],21,4237533241),h=s(h,p=s(p,m=s(m,V,h,p,i[a+12],6,1700485571),V,h,i[a+3],10,2399980690),m,V,i[a+10],15,4293915773),p,m,i[a+1],21,2240044497),h=s(h,p=s(p,m=s(m,V,h,p,i[a+8],6,1873313359),V,h,i[a+15],10,4264355552),m,V,i[a+6],15,2734768916),p,m,i[a+13],21,1309151649),h=s(h,p=s(p,m=s(m,V,h,p,i[a+4],6,4149444226),V,h,i[a+11],10,3174756917),m,V,i[a+2],15,718787259),p,m,i[a+9],21,3951481745),m=l(m,c),V=l(V,d),h=l(h,g),p=l(p,f);return(o(m)+o(V)+o(h)+o(p)).toLowerCase()},d.blowfish=function(){var e={},I={},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function y(e,t,n,r){var s=0,o=e&&e.length||0,i=new(r||Array)(o);if(o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=cache[t]||buildFn(t)),n)for(;s<o;++s)i[s]=t.call(n,e[s],s,e);else for(;s<o;++s)i[s]=t(e[s],s,e);return i}function _(e,t,n){var r,s,o,i,a="";if("string"!=typeof e||e.length<1||!Array.isArray(t)||!Array.isArray(n)||t.length!=n.length)return e;for(i=e.length,r=0;r<i;r++)s=e.charAt(r),0<=(o=t.indexOf(s))&&(s=n[o]),a+=s;return a}return I.encode=function(e){for(var t=[],n=e.length,r=n%3,s=n-r,o=0;o<s;){var i=e[o++]<<16|e[o++]<<8|e[o++];t.push(a.charAt(i>>>18&63)),t.push(a.charAt(i>>>12&63)),t.push(a.charAt(i>>>6&63)),t.push(a.charAt(63&i))}switch(r){case 2:i=e[o++]<<16|e[o++]<<8;t.push(a.charAt(i>>>18&63)),t.push(a.charAt(i>>>12&63)),t.push(a.charAt(i>>>6&63)),t.push("=");break;case 1:i=e[o++]<<16;t.push(a.charAt(i>>>18&63)),t.push(a.charAt(i>>>12&63)),t.push("="),t.push("=")}return t.join("")},I.decode=function(e){for(var t=e.split(""),n=[],r=t.length;"="==t[--r];);for(var s=0;s<r;){var o=a.indexOf(t[s++])<<18;s<=r&&(o|=a.indexOf(t[s++])<<12),s<=r&&(o|=a.indexOf(t[s++])<<6),s<=r&&(o|=a.indexOf(t[s++])),n.push(o>>>16&255),n.push(o>>>8&255),n.push(255&o)}for(;0==n[n.length-1];)n.pop();return n},e.blowfish=new function(){var m=Math.pow(2,8),V=Math.pow(2,16),h=Math.pow(2,24),n=null,l={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]};function p(e,t){return(e>>16^t>>16)<<16|65535&(65535&e^65535&t)}function A(e,t){var n=t.s3[255&e];e>>=8;var r=t.s2[255&e];e>>=8;var s=t.s1[255&e];e>>=8;var o=t.s0[255&e],i=(o>>16)+(s>>16)+((65535&o)+(65535&s)>>16)<<16|(65535&o)+(65535&s)&65535;return((i=(i>>16^r>>16)<<16|65535&(65535&i^65535&r))>>16)+(n>>16)+((65535&i)+(65535&n)>>16)<<16|(65535&i)+(65535&n)&65535}function c(e,t){var n=e.left,r=e.right;n=p(n=p(n=p(n=p(n=p(n=p(n=p(n=p(n=p(n,t.p[0]),p(A(r=p(r,p(A(n,t),t.p[1])),t),t.p[2])),p(A(r=p(r,p(A(n,t),t.p[3])),t),t.p[4])),p(A(r=p(r,p(A(n,t),t.p[5])),t),t.p[6])),p(A(r=p(r,p(A(n,t),t.p[7])),t),t.p[8])),p(A(r=p(r,p(A(n,t),t.p[9])),t),t.p[10])),p(A(r=p(r,p(A(n,t),t.p[11])),t),t.p[12])),p(A(r=p(r,p(A(n,t),t.p[13])),t),t.p[14])),p(A(r=p(r,p(A(n,t),t.p[15])),t),t.p[16])),e.right=n,e.left=p(r,t.p[17])}function v(e){var t,n,r,s=e,o=0,i=0,a={left:0,right:0},u={p:y(l.p.slice(0),function(e){var t,n=s.length;for(t=0;t<4;t++)i=i*m|s[o++%n];return(e>>16^i>>16)<<16|65535&(65535&e^65535&i)}),s0:l.s0.slice(0),s1:l.s1.slice(0),s2:l.s2.slice(0),s3:l.s3.slice(0)};for(t=0,r=u.p.length;t<r;)c(a,u),u.p[t++]=a.left,u.p[t++]=a.right;for(t=0;t<4;t++)for(n=0,r=u["s"+t].length;n<r;)c(a,u),u["s"+t][n++]=a.left,u["s"+t][n++]=a.right;return u}this.hexStringToByteArray=function(e){e.length%2==1&&(e+="0");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},this.getIV=function(){return I.encode(n)},this.setIV=function(e){var t=I.decode(e);(n={}).left=t[0]*h|t[1]*V|t[2]*m|t[3],n.right=t[4]*h|t[5]*V|t[6]*m|t[7]},this.encryptString=function(e,t){for(var n=v(this.hexStringToByteArray(t)),r=8-(7&e.length),s=0;s<r;s++)e+=String.fromCharCode(r);var o=[],i=e.length>>3,a=0,u={};for(s=0;s<i;s++)u.left=e.charCodeAt(a)*h|e.charCodeAt(a+1)*V|e.charCodeAt(a+2)*m|e.charCodeAt(a+3),u.right=e.charCodeAt(a+4)*h|e.charCodeAt(a+5)*V|e.charCodeAt(a+6)*m|e.charCodeAt(a+7),c(u,n),o.push(u.left>>24&255),o.push(u.left>>16&255),o.push(u.left>>8&255),o.push(255&u.left),o.push(u.right>>24&255),o.push(u.right>>16&255),o.push(u.right>>8&255),o.push(255&u.right),a+=8;return _(I.encode(o),["+","/","="],["-","_","~"])},this.decryptString=function(e,t){for(var n,r,s,o,i=v(this.hexStringToByteArray(t)),a=[],u=I.decode(_(e,["-","_","~"],["+","/","="])),l=u.length>>3,c=0,d={},g=0;g<l;g++)d.left=u[c]*h|u[c+1]*V|u[c+2]*m|u[c+3],d.right=u[c+4]*h|u[c+5]*V|u[c+6]*m|u[c+7],r=i,o=s=void 0,s=(n=d).left,o=n.right,s=p(s=p(s=p(s=p(s=p(s=p(s=p(s=p(s=p(s,r.p[17]),p(A(o=p(o,p(A(s,r),r.p[16])),r),r.p[15])),p(A(o=p(o,p(A(s,r),r.p[14])),r),r.p[13])),p(A(o=p(o,p(A(s,r),r.p[12])),r),r.p[11])),p(A(o=p(o,p(A(s,r),r.p[10])),r),r.p[9])),p(A(o=p(o,p(A(s,r),r.p[8])),r),r.p[7])),p(A(o=p(o,p(A(s,r),r.p[6])),r),r.p[5])),p(A(o=p(o,p(A(s,r),r.p[4])),r),r.p[3])),p(A(o=p(o,p(A(s,r),r.p[2])),r),r.p[1])),n.right=s,n.left=p(o,r.p[0]),a.push(d.left>>24&255),a.push(d.left>>16&255),a.push(d.left>>8&255),a.push(255&d.left),a.push(d.right>>24&255),a.push(d.right>>16&255),a.push(d.right>>8&255),a.push(255&d.right),c+=8;if(a[a.length-1]==a[a.length-2]||1==a[a.length-1]){var f=a[a.length-1];a.splice(a.length-f,f)}return y(a,function(e){return String.fromCharCode(e)}).join("")},this.setIV("0000000000000000")},e.blowfish}(),d.getGravatarURL=function(e,t){t=t||80;return"https://www.gravatar.com/avatar/"+d.md5(e)+".jpg?s="+t},"function"==typeof define&&define.amd)define(function(){return d});else if("object"==typeof exports)module.exports=d;else{var e=i.commonUtilities;d.existingUtilityFunctions=function(){return i.commonUtilities=e,this},i.commonUtilities=d}}(this);"use strict";var ShareHelper={networks:null,serverResponse:"",success:!1,errorMessage:"",responseInfo:"",callBackWhenComplete:null,enginesisSession:null,initialize:function(e,t,n,r){var s,o,i;if(this.enginesisSession=e,this.networks=[{id:"email",init:this.initializeEmail.bind(this),share:this.ShareByEmail.bind(this)},{id:"facebook",init:this.initializeFacebook.bind(this),share:this.FacebookFeed.bind(this)},{id:"twitter",init:this.initializeTwitter.bind(this),share:this.TwitterStatus.bind(this)},{id:"googleplus",init:this.initializeGooglePlus.bind(this),share:this.GoogleFeed.bind(this)}],null!=t)if(0<=(s=Object.prototype.toString.call(t)).indexOf("String"))o=t,this.initializeNetwork(o,n,r);else if(0<=s.indexOf("Number"))(t>this.networks.length||t<0)&&(t=this.networks.length-1),o=this.networks[t],this.initializeNetwork(o,n,r);else if(0<t.length)for(i=0;i<t.length;i++)o=t[i],this.initializeNetwork(o,n,r)},share:function(e,t,n){var r,s;for(r=0;r<this.networks.length;r++)(s=this.networks[r]).id==e&&s.share(t,n)},initializeNetwork:function(e,t,n){var r,s;for(r=0;r<this.networks.length;r++)(s=this.networks[r]).id==e&&s.init(t,n)},initializeNetworks:function(e,t,n){var r,s,o,i;for(s=0;s<e.length;s++)for(o=e[s],r=0;r<this.networks.length;r++)(i=this.networks[r]).id==o&&i.init(t,n)},initializeFacebook:function(e,t){var n,r,s;null==window.FB||null==window.FB.ui?(window.fbAsyncInit=function(){window.FB.init({appId:e.facebookAppId,xfbml:!0,status:!0,cookie:!0,oauth:!0,frictionlessRequests:!0,display:"popup",version:"v2.0"}),null!=t&&t("facebook")},n="facebook-jssdk",document.getElementById(n)||(s=document.getElementsByTagName("script")[0],(r=document.createElement("script")).id=n,r.async=!0,r.src="//connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(r,s))):null!=t&&t("facebook")},initializeTwitter:function(e,t){var n,r,s="twitter-jswidgets",o=document.getElementsByTagName("script")[0],i=this.onTweetComplete;null==window.twttr&&null==document.getElementById(s)?(window.twttr=((r=document.createElement("script")).id=s,r.src="//platform.twitter.com/widgets.js",o.parentNode.insertBefore(r,o),window.twttr||(n={_e:[],ready:function(e){n._e.push(e)}})),window.twttr.ready(function(e){e.events.bind("tweet",i),null!=t&&t("twitter")})):null!=t&&t("twitter")},onTweetComplete:function(e){this.enginesisSession.debugLog("ShareHelper:onTweetComplete event="+e)},initializeGooglePlus:function(e,t){var n,r=document.createElement("script");this.callBackWhenComplete=t,r.type="text/javascript",r.async=!0,r.src="https://apis.google.com/js/client:plusone.js?onload=onGooglePlusLoaded",(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(r,n)},onGooglePlusLoaded:function(e){null!=this.callBackWhenComplete&&this.callBackWhenComplete("googleplus")},initializeEmail:function(e,t){null!=t&&t("email")},FacebookFeed:function(e,t){null!=FB&&null!=FB.ui&&FB.ui({method:"feed",name:e.title,caption:e.caption,description:this.description,link:e.link,picture:e.picture},function(e){e&&e.post_id?(this.responseInfo="Post was published.",this.success=!0):(this.errorMessage="Post was not published.",this.success=!1)}),null!=t&&t("facebook")},GoogleFeed:function(t,e){var n,r={contenturl:t.link,clientid:t.googleClientId,cookiepolicy:"single_host_origin",prefilltext:t.description,calltoactionlabel:"CHALLENGE",calltoactionurl:t.link,contentdeeplinkid:"/pages",calltoactiondeeplinkid:"/pages/create"};gapi.interactivepost.render("googleSharePost",r),window.setTimeout(function(){try{if("function"==typeof(n=document.getElementById("googleSharePost")).onclick)try{n.onclick.apply(n)}catch(e){window.open("https://plus.google.com/share?url="+encodeURI(t.link),"_blank")}}catch(e){window.open("https://plus.google.com/share?url="+encodeURI(t.link),"_blank")}null!=e&&e("googleplus")},350)},TwitterStatus:function(e,t){var n,r,s,o,i,a;s=null==e.shortDescription?null==e.description?"Status update":e.description:e.shortDescription,o=null==e.socialHashTags?"":e.socialHashTags,i=null==e.viaId?"":e.viaId,a=null==e.link?"":e.link,r=116-o.length-i.length,s.length>r&&(s=s.substr(0,r)),n="https://twitter.com/intent/tweet?text="+encodeURIComponent(s),0<a.length&&(n+="&url="+encodeURIComponent(a)),0<i.length&&(n+="&via="+encodeURIComponent(this.replaceChar(i,"@"))),0<o.length&&(n+="&hashtags="+encodeURIComponent(this.replaceChar(o,"#"))),window.open(n,"shareWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=yes,width=300,height=250"),null!=t&&t("twitter")},ShareByEmail:function(e,t){var n;n=null!=e.referrer?e.referrer:"enginesis.com",this.enginesisSession.gameDataCreate(n,e.fromEmail,e.fromName,e.toEmail,"",e.message,"","","",!1,0,function(e){null!=e&&null!=e.fn&&e.fn,null!=t&&t("email")})},replaceChar:function(e,t){var n=e.indexOf(t);return 0<n?e.substr(0,n)+e.substr(n+1):0==n?e.substr(1):e}};!function(d){var S={VERSION:"2.4.70",debugging:!0,disabled:!1,isOnline:!0,isPaused:!1,errorLevel:15,useHTTPS:!1,serverStage:null,serverHost:null,siteResources:{serviceURL:null,avatarImageURL:null},siteId:0,gameId:0,gameKey:"",gameGroupId:0,languageCode:"en",internalStateSeq:0,lastError:"",lastErrorMessage:"",callBackFunction:null,authToken:null,authTokenWasValidated:!1,authTokenExpires:null,refreshToken:null,sessionId:null,sessionExpires:null,siteKey:null,developerKey:null,loggedInUserInfo:null,networkId:1,platform:"",locale:"US-en",isNativeBuild:!1,isBrowserBuild:"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.location,isNodeBuild:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,isTouchDeviceFlag:!1,SESSION_COOKIE:"engsession",SESSION_USERINFO:"engsession_user",refreshTokenStorageKey:"engrefreshtoken",captchaId:"99999",captchaResponse:"DEADMAN",anonymousUserKey:"enginesisAnonymousUser",anonymousUser:null,serviceQueue:[],serviceQueueSaveKey:"enginesisServiceQueue",serviceQueueRestored:0,nodeRequest:null,gameInfo:null,favoriteGames:new Set,supportedNetworks:{Enginesis:1,Facebook:2,Google:7,Twitter:11}};function n(){S.loggedInUserInfo={userId:0,userName:"",fullName:"",gender:"U",dateOfBirth:null,accessLevel:0,siteUserId:"",rank:10001,level:"n00b",experiencePoints:0,coins:0,loginDate:null,email:null,location:"",country:""},S.networkId=1,S.sessionId=null,S.authToken=null,S.authTokenWasValidated=!1,S.authTokenExpires=null,S.refreshToken=null}function k(e){return null==e||"string"==typeof e&&(""===e||"undefined"===e)||e instanceof Array&&0==e.length||!1===e||"number"==typeof e&&(isNaN(e)||0===e)}function s(e){return null==e}function r(e){return"string"==typeof e?"1"===(e=e.toLowerCase())||"true"===e||"t"===e||"checked"===e||"yes"===e||"y"===e:!0===e||1===e}function o(e){return e&&e.results&&e.results.status&&"1"==e.results.status.success}function g(e,t,n){var r;p(e);try{r=JSON.parse(t)}catch(e){r=U(null,0,"SERVICE_ERROR","Error: "+e.message+"; "+t.toString(),null),q("Enginesis requestComplete exception "+JSON.stringify(r))}r.fn=r.results.passthru.fn,"function"==typeof n?n(r):"function"==typeof S.callBackFunction&&S.callBackFunction(r)}function i(e){var t=!1;if(e&&e.results&&e.results.result.row){var n=e.results.result.row;q(">>>>> enginesis.refreshSessionInfo new session id "+n.session_id+" new CR "+n.cr),V(n.cr)||(q("updateLoggedInUserInfo hash does not match. From server: "+n.cr+". Computed here: "+m()),t=!1),t=G(n)}return t}function a(e){e.results.result.row?S.gameInfo=e.results.result.row:S.gameInfo=e.results.result[0],r(S.gameInfo.is_favorite)&&S.favoriteGames.add(parseInt(S.gameInfo.game_id,10))}function u(e){var t=e.results.result;S.favoriteGames.clear();for(var n=0;n<t.length;n++)S.favoriteGames.add(parseInt(t[n].game_id,10))}function l(e){var t=e.results.result.row;t.cr,a(e),S.sessionId=t.session_id,console.log("enginesis.updateGameSessionInfo session_id is "+S.sessionId),S.siteKey=t.developerKey||"",t.authtok?(S.authToken=t.authtok,S.authTokenWasValidated=!0):t.site_mark&&t.site_mark!=S.anonymousUser.userId&&(S.anonymousUser.userId=t.site_mark,D()),r(t.tokenExpired)&&!k(S.refreshToken)?S.sessionRefresh(S.refreshToken,null):G(null),S.siteResources.baseURL=t.siteBaseUrl||"",S.siteResources.profileURL=t.profileUrl||"",S.siteResources.loginURL=t.loginUrl||"",S.siteResources.registerURL=t.registerUrl||"",S.siteResources.forgotPasswordURL=t.forgotPasswordUrl||"",S.siteResources.playURL=t.playUrl||"",S.siteResources.privacyURL=t.privacyUrl||"",S.siteResources.termsURL=t.termsUrl||""}function c(e){var t=!1;if(e&&e.results&&e.results.result.row){var n=e.results.result.row,r=S.loggedInUserInfo;V(n.cr)||q("updateLoggedInUserInfo hash does not match. From server: "+n.cr+". Computed here: "+m()),r.userId=n.user_id,r.userName=n.user_name,r.fullName=n.real_name,r.gender=n.gender,r.dateOfBirth=n.dob,r.accessLevel=n.access_level,r.siteUserId=n.site_user_id,r.rank=n.user_rank,r.level=n.level,r.experiencePoints=n.site_experience_points,r.coins=n.site_currency_value,r.loginDate=n.last_login,r.email=n.email_address,r.location=n.city,r.country=n.country_code,S.networkId=n.network_id,t=G(n)}return t}function f(e){e&&e.results&&e.results.result.row&&(n(),t(S.SESSION_COOKIE),n())}function m(e){var t=S.loggedInUserInfo;s((e=e||{}).siteId)&&(e.siteId=S.siteId),s(e.userId)&&(e.userId=t.userId),s(e.gameId)&&(e.gameId=S.gameId),s(e.siteKey)&&(e.siteKey=S.siteKey),s(e.dayStamp)&&(e.dayStamp=Math.floor(Date.now()/1728e5)),s(e.userName)&&(e.userName=t.userName),s(e.siteUserId)&&(e.siteUserId=t.siteUserId,s(e.siteUserId)&&(e.siteUserId="")),s(e.accessLevel)&&(e.accessLevel=t.accessLevel),0==e.userId?s(e.siteMark)&&(S.anonymousUser?e.siteMark=S.anonymousUser.userId:e.siteMark=0):e.siteMark=0;var n="s="+e.siteId+"&u="+e.userId+"&d="+e.dayStamp+"&n="+e.userName+"&g="+e.gameId+"&i="+e.siteUserId+"&l="+e.accessLevel+"&m="+e.siteMark+"&k="+e.siteKey,r=S.md5(n);return console.log("sessionMakeHash from "+n+" yields "+r),r}function V(e){return e==m()}function h(e,t,n,r){!function(e){var t=e.fn;if(o(e)&&t){var n={SessionBegin:l,SessionRefresh:i,UserLogin:c,UserLogout:f,GameGet:a,UserFavoriteGamesList:u}[t];s(n)||n(e)}}(e),null!=n?n(e):null!=r&&r(e),null!=t&&t(e)}function p(n){var r=0,e=S.serviceQueue;return null!=e&&0<e.length&&(e=e.filter(function(e){var t=e.state_seq==n;return t&&(e.state_status=2,r++),!t}),S.serviceQueue=e),0<S.serviceQueueRestored&&0<r&&(S.serviceQueueRestored-=r,A()),r}function A(){return F(S.serviceQueueSaveKey,S.serviceQueue),!0}function v(){var e=B(S.serviceQueueSaveKey);return null==e?(e=[],S.serviceQueueRestored=0):(F(S.serviceQueueSaveKey,[]),S.serviceQueueRestored=S.serviceQueue.length),S.serviceQueue=e,function(){var e,t=S.serviceQueue;if(null!=t&&0<t.length)for(e=0;e<t.length;e++)t[e].state_status=0}(),0<S.serviceQueueRestored}function I(s,e){if(S.isOnline&&0<S.serviceQueue.length){var o=function(){var e,t,n=S.serviceQueue,r=null;for(t=0;t<n.length;t++)if(void 0===(e=n[t]).state_status||0==e.state_status){e.state_status=1,r=e;break}return r}();if(null!=o){var t,i=o.fn,a=o.overRideCallBackFunction;"function"==typeof d.fetch?fetch(S.siteResources.serviceURL,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json"},body:R(o)}).then(function(r){if(p(o.state_seq),200==r.status)r.json().then(function(e){var t;if(null==e){var n=r.text();q("Enginesis service error for "+i+": "+n),t="Enginesis service while contacting Enginesis at "+S.serverHost+" for "+i,e=U(i,o.state_seq,"SERVICE_ERROR",t)}else e.fn=i;h(e,s,a,S.callBackFunction)}).catch(function(e){var t="Invalid response from Enginesis at "+S.serverHost+" for "+i+": "+e.toString(),n=U(i,o.state_seq,"SERVICE_ERROR",t);q(t),h(n,s,a,S.callBackFunction)});else{var e="Network error "+r.status+" while contacting Enginesis at "+S.serverHost+" for "+i,t=U(i,o.state_seq,"SERVICE_ERROR",e);q(e),h(t,s,a,S.callBackFunction)}},function(e){q(t=C()?"Enginesis Network error encountered, assuming we're offline. "+S.serverHost+" for "+i+": "+e.toString():"Enginesis is already offline, leaving this message on the queue."),h(U(i,o.state_seq,"OFFLINE",t),s,a,S.callBackFunction)}).catch(function(e){q(t=C()?"Enginesis Network error encountered, assuming we're offline. "+S.serverHost+" for "+i+": "+e.toString():"Enginesis is already offline, leaving this message on the queue."),h(U(i,o.state_seq,"OFFLINE",t),s,a,S.callBackFunction)}):S.isNodeBuild?function(s,o,i){var e=_(s,o);if(null==S.nodeRequest&&(S.nodeRequest=require("request"),null==S.nodeRequest))throw new Error("request() is not defined in the node.js environment");S.nodeRequest.post({method:"POST",url:S.siteResources.serviceURL,form:R(e),headers:{"User-Agent":"Enginesis client","Content-Type":"application/x-www-form-urlencoded"}},function(e,t,n){if(null!=e){var r="Error posting to "+S.siteResources.serviceURL+": "+e.toString();q(r=C()?"Enginesis Network error encountered, assuming we're offline. "+S.serverHost+" for "+s+": "+e.toString():"Enginesis is already offline, leaving this message on the queue."),g(o.state_seq,w(s,o.state_seq,"OFFLINE",r),i)}else g(o.state_seq,n,i)})}(i,o,function(e){h(e,s,a,S.callBackFunction)}):(u=function(e){h(e,s,a,S.callBackFunction)},l=_(n=i,r=o),(c=new XMLHttpRequest).onload=function(e){g(r.state_seq,this.responseText,u)},c.onerror=function(e){var t="CORS request error "+c.status+" "+e.toString();q(t=C()?"Enginesis Network error encountered, assuming we're offline. "+S.serverHost+" for "+n+": "+e.toString():"Enginesis is already offline, leaving this message on the queue."),g(r.state_seq,w(n,r.state_seq,"OFFLINE",t),u)},c.open("POST",S.siteResources.serviceURL,!0),c.overrideMimeType("application/json"),c.send(R(l)))}else null!=e&&e(new Error("Queue is empty"))}else null!=e&&e(new Error("Offline or queue is empty"));var n,r,u,l,c}function b(o,i,a){return new Promise(function(e,t){if(!S.disabled&&0<S.siteId&&0<S.developerKey.length&&0<S.siteResources.serviceURL.length){var n=_(o,i);if(n.overRideCallBackFunction=a,S.serviceQueue.push(n),S.isOnline)I(e,t);else{var r="Enginesis is offline. Message "+o+" will be processed when network connectivity is restored.",s=U(o,0,"OFFLINE",r);A(),q(r),h(s,e,a,S.callBackFunction)}}else{h(s=S.disabled?U(o,0,"DISABLED","Enginesis is disabled."):U(o,0,"VALIDATION_FAILED","Enginesis internal state failed validation."),e,a,S.callBackFunction)}})}function y(t,e,n,r,s){return new Promise(function(e){h(U(t,0,n,r),e,s,S.callBackFunction)})}function _(e,t){S.internalStateSeq+=1;var n={fn:e,language_code:S.languageCode,site_id:S.siteId,state_seq:S.internalStateSeq,state_status:0,response:"json"};if(0!=S.loggedInUserInfo.userId&&S.authTokenWasValidated&&(n.logged_in_user_id=S.loggedInUserInfo.userId,n.authtok=S.authToken,s(n.user_id)&&(n.user_id=S.loggedInUserInfo.userId)),S.gameId&&(n.game_id=S.gameId),null!=t)for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function w(e,t,n,r){return JSON.stringify(U(e,t,n,r))}function U(e,t,n,r,s){return null!=e&&""!=e||(e="unknown"),void 0!==t&&null!=t||(t=0),void 0!==s&&null!=s||(s={}),void 0!==s.fn&&null!=s.fn||(s.fn=e),void 0!==s.state_seq&&null!=s.state_seq||(s.state_seq=t),{fn:e,results:{status:{success:"0",message:n,extended_info:r,passthru:s}}}}function R(e){var t,n;for(t in n=S.isBrowserBuild?new FormData:{},e)e.hasOwnProperty(t)&&"function"!=typeof e[t]&&"overRideCallBackFunction"!=t&&(S.isBrowserBuild?n.append(t,e[t]):n[t]=e[t]);return n}function C(){var e;return S.isOnline?(A(),e=!0):e=!1,S.isOnline=!1,e}function L(){var n=!S.isOnline;return S.isOnline=!0,v(),new Promise(function(e){!function e(t){S.isOnline&&0<S.serviceQueue.length?(n&&(n=!1),I(function(){e(t)},function(){e(t)})):t()}(e)})}function E(){return S.useHTTPS?"https://":"http://"}function T(e){var t,n=S.isBrowserBuild?d.location.host:"";switch(void 0!==e&&null!=e||(e=n),e){case"":case"-l":case"-d":case"-q":case"-x":S.serverStage=e,S.serverHost="www.enginesis"+S.serverStage+".com";break;case"*":e="localhost"==n.substr(0,9)?"-l":null!=(t=/\-[ldqx]\./.exec(n))&&0<t.index?n.substr(t.index,2):"",S.serverStage=e,S.serverHost="www.enginesis"+S.serverStage+".com";break;default:null!=(t=/\-[ldqx]\./.exec(e))&&0<t.index?S.serverStage=e.substr(t.index,2):S.serverStage="",S.serverHost=e}return S.siteResources.serviceURL=E()+S.serverHost+"/index.php",S.siteResources.avatarImageURL=E()+S.serverHost+"/avatar/index.php",S.serverStage}function N(e){return"undefined"!=typeof document&&e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:""}function G(e){var t;e?(t=!0,S.sessionId=e.session_id,S.sessionExpires=new Date(e.session_expires),S.authToken=e.authtok,S.authTokenExpires=new Date(e.expires),S.refreshToken=e.refreshToken,S.authTokenWasValidated=!0):t=!1,console.log("enginesis.saveUserSessionInfo session id is "+S.sessionId);var n=m(),r=S.loggedInUserInfo,s={userId:r.userId,userName:r.userName,siteUserId:r.siteUserId,networkId:S.networkId,siteKey:S.siteKey,accessLevel:r.accessLevel,rank:r.rank,experiencePoints:r.experiencePoints,loginDate:r.loginDate,email:r.email,location:r.location,country:r.country,sessionId:t?S.sessionId:null,sessionExpires:t?S.sessionExpires.toJSON():null,authToken:t?S.authToken:null,authTokenExpires:t?S.authTokenExpires.toJSON():null,refreshToken:S.refreshToken,cr:n};return F(S.SESSION_COOKIE,s),!0}function x(){var e,t=S.loggedInUserInfo,n=B(S.SESSION_COOKIE);return null!=n&&((e=m({siteId:S.siteId,userId:n.userId,userName:n.userName,siteUserId:n.siteUserId||"",accessLevel:n.accessLevel,siteKey:n.siteKey}))!=n.cr&&q("restoreUserSessionInfo hash does not match. From server: "+n.cr+". Computed here: "+e),t.userId=n.userId,t.userName=n.userName,t.siteUserId=n.siteUserId||"",S.networkId=n.networkId,S.siteKey=n.siteKey,t.accessLevel=n.accessLevel,t.rank=n.rank,t.experiencePoints=n.experiencePoints,t.loginDate=n.loginDate,t.email=n.email,t.location=n.location,t.country=n.country,S.sessionId=n.sessionId,S.sessionExpires=new Date(n.sessionExpires),S.authToken=n.authToken,S.authTokenExpires=new Date(n.authTokenExpires),S.refreshToken=n.refreshToken,console.log("enginesis.restoreUserSessionInfo "+S.sessionId)),!1}function O(){var e=S.refreshToken;return k(e)?(x(),k(e=S.refreshToken)?null:e):e}function q(e,t){S.debugging&&(null==t&&(t=15),0<(S.errorLevel&t)&&console.log(e),9==t&&alert(e))}function F(e,t){null!=e&&null!=t&&(d.localStorage[e]=JSON.stringify(t))}function t(e){null!=e&&d.localStorage.removeItem(e)}function B(e){var t,n=null;return void 0!==d.localStorage&&null!=e&&null!=(t=d.localStorage[e])&&(n=JSON.parse(t)),n}function e(){return{dateCreated:new Date,dateLastVisit:new Date,subscriberEmail:"",userId:0,userName:"",favoriteGames:new Set,gamesPlayed:new Set,cr:""}}function P(){null==S.anonymousUser&&(S.anonymousUser=B(S.anonymousUserKey),null==S.anonymousUser?S.anonymousUser=e():((S.anonymousUser.cr||"")!=M()&&(S.anonymousUser=e()),Array.isArray(S.anonymousUser.favoriteGames)&&(S.anonymousUser.favoriteGames=new Set(S.anonymousUser.favoriteGames)),Array.isArray(S.anonymousUser.gamesPlayed)&&(S.anonymousUser.gamesPlayed=new Set(S.anonymousUser.gamesPlayed))));return S.anonymousUser}function D(){if(null!=S.anonymousUser){var e=S.anonymousUser;e.favoriteGames=Array.from(e.favoriteGames),e.gamesPlayed=Array.from(e.gamesPlayed),e.cr=M(),F(S.anonymousUserKey,e),e.favoriteGames=new Set(e.favoriteGames),e.gamesPlayed=new Set(e.gamesPlayed)}}function M(){var e=S.anonymousUser;return S.md5(e.subscriberEmail+e.userId+e.userName+S.developerKey)}if(S.init=function(e){var t;n(),e&&(S.siteId=null!=e.siteId?e.siteId:0,S.gameId=null!=e.gameId?e.gameId:0,S.gameKey=null!=e.gameKey?e.gameKey:"",S.gameGroupId=null!=e.gameGroupId?e.gameGroupId:0,S.languageCode=function(e){k(e)?e="en":2<e.length&&(e=e.substr(0,2));return e}(e.languageCode),S.serverStage=null!=e.serverStage?e.serverStage:"",S.developerKey=null!=e.developerKey?e.developerKey:"",S.authToken=null!=e.authToken?e.authToken:null,S.callBackFunction=null!=e.callBackFunction?e.callBackFunction:null),S.isBrowserBuild?(S.platform=navigator.platform,S.locale=navigator.language,S.isNativeBuild="file:"==d.location.protocol,S.isTouchDeviceFlag=(t=!1,S.isBrowserBuild&&("ontouchstart"in window?t=!0:d.DocumentTouch&&document instanceof DocumentTouch&&(t=!0)),t)):(S.platform="nodejs",S.locale="en",S.isNativeBuild=!0,S.isTouchDeviceFlag=!1),S.isBrowserBuild?S.useHTTPS="https:"==d.location.protocol:S.useHTTPS=!1,T(S.serverStage),function(){var e,t,n=S.authToken,r=!1;null!=n&&""!=n||void 0!==(e=function(e){var t,n=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(/\+/g," "))},s={};!e&&S.isBrowserBuild&&(e=d.location.search.substring(1));for(;t=n.exec(e);)s[r(t[1])]=r(t[2]);return s}()).authtok&&(n=e.authtok);null!=n&&""!=n||(n=N(S.SESSION_COOKIE));null!=n&&""!=n&&null!=(t=N(S.SESSION_USERINFO))&&""!=t&&null!=(t=JSON.parse(t))&&(S.authToken=n,S.authTokenWasValidated=!0,S.loggedInUserInfo.userId=Math.floor(t.user_id),S.loggedInUserInfo.userName=t.user_name,S.loggedInUserInfo.accessLevel=Math.floor(t.access_level),S.loggedInUserInfo.siteUserId=t.site_user_id,S.networkId=Math.floor(t.network_id),r=!0);return r}()||x(),S.isUserLoggedIn()||P(),v()&&d.setTimeout(L,500)},S.md5=function(e){function u(e,t){return e<<t|e>>>32-t}function l(e,t){var n,r,s,o,i;return s=2147483648&e,o=2147483648&t,i=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^i^s^o:n|r?1073741824&i?3221225472^i^s^o:1073741824^i^s^o:i^s^o}function t(e,t,n,r,s,o,i){var a;return l(u(e=l(e,l(l((a=t)&n|~a&r,s),i)),o),t)}function n(e,t,n,r,s,o,i){var a;return l(u(e=l(e,l(l(t&(a=r)|n&~a,s),i)),o),t)}function r(e,t,n,r,s,o,i){return l(u(e=l(e,l(l(t^n^r,s),i)),o),t)}function s(e,t,n,r,s,o,i){return l(u(e=l(e,l(l(n^(t|~r),s),i)),o),t)}function o(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var i,a,c,d,g,f,m,V,h,p;for(i=function(e){for(var t,n=e.length,r=n+8,s=16*((r-r%64)/64+1),o=Array(s-1),i=0,a=0;a<n;)i=a%4*8,o[t=(a-a%4)/4]=o[t]|e.charCodeAt(a)<<i,a++;return i=a%4*8,o[t=(a-a%4)/4]=o[t]|128<<i,o[s-2]=n<<3,o[s-1]=n>>>29,o}(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e)),m=1732584193,V=4023233417,h=2562383102,p=271733878,a=0;a<i.length;a+=16)V=s(V=s(V=s(V=s(V=r(V=r(V=r(V=r(V=n(V=n(V=n(V=n(V=t(V=t(V=t(V=t(d=V,h=t(g=h,p=t(f=p,m=t(c=m,V,h,p,i[a+0],7,3614090360),V,h,i[a+1],12,3905402710),m,V,i[a+2],17,606105819),p,m,i[a+3],22,3250441966),h=t(h,p=t(p,m=t(m,V,h,p,i[a+4],7,4118548399),V,h,i[a+5],12,1200080426),m,V,i[a+6],17,2821735955),p,m,i[a+7],22,4249261313),h=t(h,p=t(p,m=t(m,V,h,p,i[a+8],7,1770035416),V,h,i[a+9],12,2336552879),m,V,i[a+10],17,4294925233),p,m,i[a+11],22,2304563134),h=t(h,p=t(p,m=t(m,V,h,p,i[a+12],7,1804603682),V,h,i[a+13],12,4254626195),m,V,i[a+14],17,2792965006),p,m,i[a+15],22,1236535329),h=n(h,p=n(p,m=n(m,V,h,p,i[a+1],5,4129170786),V,h,i[a+6],9,3225465664),m,V,i[a+11],14,643717713),p,m,i[a+0],20,3921069994),h=n(h,p=n(p,m=n(m,V,h,p,i[a+5],5,3593408605),V,h,i[a+10],9,38016083),m,V,i[a+15],14,3634488961),p,m,i[a+4],20,3889429448),h=n(h,p=n(p,m=n(m,V,h,p,i[a+9],5,568446438),V,h,i[a+14],9,3275163606),m,V,i[a+3],14,4107603335),p,m,i[a+8],20,1163531501),h=n(h,p=n(p,m=n(m,V,h,p,i[a+13],5,2850285829),V,h,i[a+2],9,4243563512),m,V,i[a+7],14,1735328473),p,m,i[a+12],20,2368359562),h=r(h,p=r(p,m=r(m,V,h,p,i[a+5],4,4294588738),V,h,i[a+8],11,2272392833),m,V,i[a+11],16,1839030562),p,m,i[a+14],23,4259657740),h=r(h,p=r(p,m=r(m,V,h,p,i[a+1],4,2763975236),V,h,i[a+4],11,1272893353),m,V,i[a+7],16,4139469664),p,m,i[a+10],23,3200236656),h=r(h,p=r(p,m=r(m,V,h,p,i[a+13],4,681279174),V,h,i[a+0],11,3936430074),m,V,i[a+3],16,3572445317),p,m,i[a+6],23,76029189),h=r(h,p=r(p,m=r(m,V,h,p,i[a+9],4,3654602809),V,h,i[a+12],11,3873151461),m,V,i[a+15],16,530742520),p,m,i[a+2],23,3299628645),h=s(h,p=s(p,m=s(m,V,h,p,i[a+0],6,4096336452),V,h,i[a+7],10,1126891415),m,V,i[a+14],15,2878612391),p,m,i[a+5],21,4237533241),h=s(h,p=s(p,m=s(m,V,h,p,i[a+12],6,1700485571),V,h,i[a+3],10,2399980690),m,V,i[a+10],15,4293915773),p,m,i[a+1],21,2240044497),h=s(h,p=s(p,m=s(m,V,h,p,i[a+8],6,1873313359),V,h,i[a+15],10,4264355552),m,V,i[a+6],15,2734768916),p,m,i[a+13],21,1309151649),h=s(h,p=s(p,m=s(m,V,h,p,i[a+4],6,4149444226),V,h,i[a+11],10,3174756917),m,V,i[a+2],15,718787259),p,m,i[a+9],21,3951481745),m=l(m,c),V=l(V,d),h=l(h,g),p=l(p,f);return(o(m)+o(V)+o(h)+o(p)).toLowerCase()},S.blowfish=function(){var e={},I={},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function y(e,t,n,r){var s=0,o=e&&e.length||0,i=new(r||Array)(o);if(o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=cache[t]||buildFn(t)),n)for(;s<o;++s)i[s]=t.call(n,e[s],s,e);else for(;s<o;++s)i[s]=t(e[s],s,e);return i}function _(e,t,n){var r,s,o,i,a="";if("string"!=typeof e||e.length<1||!Array.isArray(t)||!Array.isArray(n)||t.length!=n.length)return e;for(i=e.length,r=0;r<i;r++)s=e.charAt(r),0<=(o=t.indexOf(s))&&(s=n[o]),a+=s;return a}return I.encode=function(e){for(var t=[],n=e.length,r=n%3,s=n-r,o=0;o<s;){var i=e[o++]<<16|e[o++]<<8|e[o++];t.push(a.charAt(i>>>18&63)),t.push(a.charAt(i>>>12&63)),t.push(a.charAt(i>>>6&63)),t.push(a.charAt(63&i))}switch(r){case 2:i=e[o++]<<16|e[o++]<<8;t.push(a.charAt(i>>>18&63)),t.push(a.charAt(i>>>12&63)),t.push(a.charAt(i>>>6&63)),t.push("=");break;case 1:i=e[o++]<<16;t.push(a.charAt(i>>>18&63)),t.push(a.charAt(i>>>12&63)),t.push("="),t.push("=")}return t.join("")},I.decode=function(e){for(var t=e.split(""),n=[],r=t.length;"="==t[--r];);for(var s=0;s<r;){var o=a.indexOf(t[s++])<<18;s<=r&&(o|=a.indexOf(t[s++])<<12),s<=r&&(o|=a.indexOf(t[s++])<<6),s<=r&&(o|=a.indexOf(t[s++])),n.push(o>>>16&255),n.push(o>>>8&255),n.push(255&o)}for(;0==n[n.length-1];)n.pop();return n},e.blowfish=new function(){var m=Math.pow(2,8),V=Math.pow(2,16),h=Math.pow(2,24),n=null,l={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]};function p(e,t){return(e>>16^t>>16)<<16|65535&(65535&e^65535&t)}function A(e,t){var n=t.s3[255&e];e>>=8;var r=t.s2[255&e];e>>=8;var s=t.s1[255&e];e>>=8;var o=t.s0[255&e],i=(o>>16)+(s>>16)+((65535&o)+(65535&s)>>16)<<16|(65535&o)+(65535&s)&65535;return((i=(i>>16^r>>16)<<16|65535&(65535&i^65535&r))>>16)+(n>>16)+((65535&i)+(65535&n)>>16)<<16|(65535&i)+(65535&n)&65535}function c(e,t){var n=e.left,r=e.right;n=p(n=p(n=p(n=p(n=p(n=p(n=p(n=p(n=p(n,t.p[0]),p(A(r=p(r,p(A(n,t),t.p[1])),t),t.p[2])),p(A(r=p(r,p(A(n,t),t.p[3])),t),t.p[4])),p(A(r=p(r,p(A(n,t),t.p[5])),t),t.p[6])),p(A(r=p(r,p(A(n,t),t.p[7])),t),t.p[8])),p(A(r=p(r,p(A(n,t),t.p[9])),t),t.p[10])),p(A(r=p(r,p(A(n,t),t.p[11])),t),t.p[12])),p(A(r=p(r,p(A(n,t),t.p[13])),t),t.p[14])),p(A(r=p(r,p(A(n,t),t.p[15])),t),t.p[16])),e.right=n,e.left=p(r,t.p[17])}function v(e){var t,n,r,s=e,o=0,i=0,a={left:0,right:0},u={p:y(l.p.slice(0),function(e){var t,n=s.length;for(t=0;t<4;t++)i=i*m|s[o++%n];return(e>>16^i>>16)<<16|65535&(65535&e^65535&i)}),s0:l.s0.slice(0),s1:l.s1.slice(0),s2:l.s2.slice(0),s3:l.s3.slice(0)};for(t=0,r=u.p.length;t<r;)c(a,u),u.p[t++]=a.left,u.p[t++]=a.right;for(t=0;t<4;t++)for(n=0,r=u["s"+t].length;n<r;)c(a,u),u["s"+t][n++]=a.left,u["s"+t][n++]=a.right;return u}this.hexStringToByteArray=function(e){e.length%2==1&&(e+="0");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},this.getIV=function(){return I.encode(n)},this.setIV=function(e){var t=I.decode(e);(n={}).left=t[0]*h|t[1]*V|t[2]*m|t[3],n.right=t[4]*h|t[5]*V|t[6]*m|t[7]},this.encryptString=function(e,t){for(var n=v(this.hexStringToByteArray(t)),r=8-(7&e.length),s=0;s<r;s++)e+=String.fromCharCode(r);var o=[],i=e.length>>3,a=0,u={};for(s=0;s<i;s++)u.left=e.charCodeAt(a)*h|e.charCodeAt(a+1)*V|e.charCodeAt(a+2)*m|e.charCodeAt(a+3),u.right=e.charCodeAt(a+4)*h|e.charCodeAt(a+5)*V|e.charCodeAt(a+6)*m|e.charCodeAt(a+7),c(u,n),o.push(u.left>>24&255),o.push(u.left>>16&255),o.push(u.left>>8&255),o.push(255&u.left),o.push(u.right>>24&255),o.push(u.right>>16&255),o.push(u.right>>8&255),o.push(255&u.right),a+=8;return _(I.encode(o),["+","/","="],["-","_","~"])},this.decryptString=function(e,t){for(var n,r,s,o,i=v(this.hexStringToByteArray(t)),a=[],u=I.decode(_(e,["-","_","~"],["+","/","="])),l=u.length>>3,c=0,d={},g=0;g<l;g++)d.left=u[c]*h|u[c+1]*V|u[c+2]*m|u[c+3],d.right=u[c+4]*h|u[c+5]*V|u[c+6]*m|u[c+7],r=i,o=s=void 0,s=(n=d).left,o=n.right,s=p(s=p(s=p(s=p(s=p(s=p(s=p(s=p(s=p(s,r.p[17]),p(A(o=p(o,p(A(s,r),r.p[16])),r),r.p[15])),p(A(o=p(o,p(A(s,r),r.p[14])),r),r.p[13])),p(A(o=p(o,p(A(s,r),r.p[12])),r),r.p[11])),p(A(o=p(o,p(A(s,r),r.p[10])),r),r.p[9])),p(A(o=p(o,p(A(s,r),r.p[8])),r),r.p[7])),p(A(o=p(o,p(A(s,r),r.p[6])),r),r.p[5])),p(A(o=p(o,p(A(s,r),r.p[4])),r),r.p[3])),p(A(o=p(o,p(A(s,r),r.p[2])),r),r.p[1])),n.right=s,n.left=p(o,r.p[0]),a.push(d.left>>24&255),a.push(d.left>>16&255),a.push(d.left>>8&255),a.push(255&d.left),a.push(d.right>>24&255),a.push(d.right>>16&255),a.push(d.right>>8&255),a.push(255&d.right),c+=8;if(a[a.length-1]==a[a.length-2]||1==a[a.length-1]){var f=a[a.length-1];a.splice(a.length-f,f)}return y(a,function(e){return String.fromCharCode(e)}).join("")},this.setIV("0000000000000000")},e.blowfish}(),S.request=function(e,t){return"object"==typeof e&&"string"==typeof e.fn&&(e=(t=e).fn),b(e,t,null)},S.versionGet=function(){return S.VERSION},S.isUserLoggedIn=function(){return 0!=S.loggedInUserInfo.userId&&""!=S.authToken&&S.authTokenWasValidated},S.userIdGet=function(){return S.isUserLoggedIn()?S.loggedInUserInfo.userId:0},S.isEnginesisResult=function(e){return e&&e.hasOwnProperty("results")&&e.results.hasOwnProperty("status")&&e.results.status.hasOwnProperty("success")},S.getLastError=function(){return{isError:""!=S.lastError,error:S.lastError,description:S.lastErrorMessage}},S.isError=function(e){return!o(e)},S.toError=function(e){var t,n=null;return e&&e.results&&e.results.status&&(t=e.results.status.extended_info?e.results.status.extended_info:e.results.status.message,(n=new Error(t)).code=e.results.status.message),n},S.toErrorString=function(e){var t="";return e&&e.results&&e.results.status&&(t+=e.results.status.message,e.results.status.extended_info&&(t+=": "+e.results.status.extended_info)),t},S.error=function(e){return(t=e)&&t.results&&t.results.status?t.results.status.message:"INVALID_PARAM";var t},S.makeErrorResponse=function(e,t,n,r,s){return U(e,t,n,r,s)},S.resultToString=function(e){return o(e)?e.results.passthru.fn:e.results.status.message+(e.results.status.extended_info?" "+e.results.status.extended_info:"")},S.pause=function(){S.isPaused=!0},S.resume=function(){S.isPaused=!1,S.isUserLoggedIn()&&S.sessionRefreshIfExpired().then(function(e){q("Session was "+(e?"refreshed":"OK"))}).catch(function(e){q("Session sessionRefreshIfExpired exception "+e.toString())})},S.getLoggedInUserInfo=function(){return{isLoggedIn:S.isUserLoggedIn(),userId:S.loggedInUserInfo.userId,userName:S.loggedInUserInfo.userName,fullName:S.loggedInUserInfo.fullName,rank:S.loggedInUserInfo.rank,level:S.loggedInUserInfo.level,experiencePoints:S.loggedInUserInfo.experiencePoints,coins:S.loggedInUserInfo.coins,loginDate:S.loggedInUserInfo.loginDate,email:S.loggedInUserInfo.email,location:S.loggedInUserInfo.location,country:S.loggedInUserInfo.country,siteUserId:S.loggedInUserInfo.siteUserId,networkId:S.networkId,accessLevel:S.loggedInUserInfo.accessLevel,gender:S.loggedInUserInfo.gender,dateOfBirth:S.loggedInUserInfo.dateOfBirth,accessToken:S.authToken,tokenExpiration:S.tokenExpirationDate}},S.isTouchDevice=function(){return S.isTouchDeviceFlag},S.isValidUserName=function(e){return 2<e.length},S.isValidPassword=function(e){return 7<e.length},S.getRefreshToken=function(){return O()},S.serverStageSet=function(e){return T(e)},S.serverStageGet=function(){return S.serverStage},S.setHTTPS=function(e){return void 0!==e&&(S.useHTTPS=!!e),S.useHTTPS},S.isHTTPS=function(){return S.useHTTPS},S.getProtocol=function(){return E()},S.serverBaseUrlGet=function(){return S.serverHost},S.getSiteSpecificUrls=function(){var e,t=S.siteResources;return null!=t.profileURL&&0<t.profileURL.length?{root:e=E()+t.baseURL,forgotPassword:e+t.forgotPasswordURL,login:e+t.loginURL,play:e+t.playURL,privacy:e+t.privacyURL,profile:e+t.profileURL,register:e+t.registerURL,terms:e+t.termsURL}:{root:e=E()+"varyn"+S.serverStage+".com",forgotPassword:e+"/procs/forgotpass.php",login:e+"/profile/",play:e+"/play/",privacy:e+"/privacy/",profile:e+"/profile/",register:e+"/profile/?action=signup",terms:e+"/tos/"}},S.gameIdGet=function(){return S.gameId},S.gameIdSet=function(e,t){return S.gameId!=e&&(S.gameInfo=null),S.gameKey=t||"",S.gameId=e},S.gameGroupIdGet=function(){return S.gameGroupId},S.gameGroupIdSet=function(e){return S.gameGroupId=e},S.siteIdGet=function(){return S.siteId},S.supportedSSONetworks=function(){return S.supportedNetworks},S.getGameImageURL=function(e){var t=null,n=0,r=0,s=null;return void 0!==e&&null!=e&&(k(e.game_name)?k(e.gameName)||(t=e.gameName):t=e.game_name,k(e.format)||(s=e.format),void 0!==e.width&&(n=e.width),void 0!==e.height&&(r=e.height)),k(s)?s=".jpg":("."!=s[0]&&(s="."+s),s.match(/\.(jpg|png|svg)/i)||(s=".jpg")),(k(n)||"*"==n)&&(n=600),(k(r)||"*"==r)&&(r=450),E()+S.serverHost+"/games/"+t+"/images/"+n+"x"+r+s},S.getDateNow=function(){return(new Date).toISOString().slice(0,19).replace("T"," ")},S.validGender=function(e){return t="M"==(t=(t=e).toUpperCase())[0]?"M":"F"==t[0]?"F":"U";var t},S.restoreOnline=function(){return L()},S.sessionBegin=function(e,t,n){var r=0;return void 0!==t&&0!==t&&null!==t||(t=S.gameIdGet()),void 0===e||""===e||null===e?e=S.gameKey:S.gameKey=e,S.isUserLoggedIn()||(!function(e,t,n,r,s,o){var i="",a="; expires=Fri, 31 Dec 9999 23:59:59 GMT";if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return;if("object"==typeof t&&(t=JSON.stringify(t)),n)switch(n.constructor){case Number:i=n===1/0?a:"; max-age="+n;break;case String:i="; expires="+n;break;case Date:i="; expires="+n.toUTCString();break;default:i=a}else i=a;document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+i+(s?"; domain="+s:"")+(r?"; path="+r:"")+(o?"; secure":"")}(S.anonymousUserKey,S.anonymousUser,86400,"/","",!1),r=S.anonymousUser.userId),b("SessionBegin",{game_id:t,gamekey:e,site_mark:r},n)},S.sessionRefresh=function(e,t){var n="SessionRefresh";if(k(e)&&k(e=O()))return S.lastError="NOT_LOGGED_IN",S.lastErrorMessage="You are not logged in.",y(n,0,S.lastError,S.lastErrorMessage,t);var r=S.gameIdGet(),s=S.gameKey,o=0;return S.isUserLoggedIn()||(o=S.anonymousUser.userId),b(n,{token:e,game_id:r,gamekey:s,site_mark:o},t)},S.sessionRefreshIfExpired=function(){return new Promise(function(e,t){var n,r,s,o,i,a=!1,u=S.loggedInUserInfo,l=B(S.SESSION_COOKIE);null!=l&&(i=6e4*(s=void 0===l.sessionExpires||0==l.sessionExpires?new Date:new Date(l.sessionExpires)).getTimezoneOffset(),o=Date.now().valueOf()>s.valueOf()-i,a=(n=m({siteId:S.siteId,userId:u.userId,userName:u.userName,siteUserId:u.siteUserId||"",accessLevel:u.accessLevel,siteKey:S.siteKey}))==l.cr&&u.userId==l.userId,!o&&a?e(!0):o?(q("verifyUserSessionInfo Session expired but we think we can refresh it."),S.sessionRefresh(O(),null).then(function(){e(!0)},function(e){t(e)}).catch(function(e){t(e)})):(q("verifyUserSessionInfo "+(r="Session hash does not match but session not expired.")+" from cache: "+l.cr+". Computed here: "+n),t(new Error(r))))})},S.voteForURIUnauth=function(e,t,n,r,s){return b("VoteForURIUnauth",{uri:e,vote_group_uri:t,vote_value:n,security_key:r},s)},S.voteCountPerURIGroup=function(e,t){return b("VoteCountPerURIGroup",{vote_group_uri:e},t)},S.developerGet=function(e,t){return b("DeveloperGet",{developer_id:e},t)},S.gameDataGet=function(e,t){return b("GameDataGet",{game_data_id:e},t)},S.gameDataCreate=function(e,t,n,r,s,o,i,a,u,l,c,d){return b("GameDataCreate",{referrer:e,from_address:t,from_name:n,to_address:r,to_name:s,user_msg:o,user_files:i,game_data:a,name_tag:u,add_to_gallery:l?1:0,last_score:c},d)},S.sendToFriend=function(e,t,n,r,s,o){var i="",a="GameDataCreate";return S.authTokenWasValidated&&0!=S.loggedInUserInfo.userId||!k(e)&&!k(t)?k(S.gameId)&&(i="INVALID_GAME_ID"):i="INVALID_PARAM",""==i?b(a,{referrer:"Enginesis",from_address:e,from_name:t,to_address:n,to_name:"User",user_msg:r,user_files:"",game_data:"",name_tag:"",add_to_gallery:0,last_score:s},o):y(a,gameId,i,"Error encountered while processing send to friend.",o)},S.gameConfigGet=function(e,t,n,r,s){return void 0===e&&(e=0),void 0!==t&&0!=t||(t=S.gameIdGet()),void 0===r&&(r=""),void 0===n&&(n=0),b("GameConfigGet",{game_config_id:e,game_id:t,category_id:n,air_date:r},s)},S.gameTrackingRecord=function(e,t,n,r,s){return S.isBrowserBuild&&null!=d.ga&&ga("send","event",e,t,n,r),b("GameTrackingRecord",{hit_type:"REQUEST",hit_category:e,hit_action:t,hit_label:n,hit_data:r},s)},S.gameFind=function(e,t){return b("GameFind",{game_name_part:e},t)},S.gameFindByName=function(e,t){return b("GameFindByName",{game_name:e},t)},S.gameGet=function(e,t){return b("GameGet",{game_id:e},t)},S.gameGetByName=function(e,t){return b("GameGetByName",{game_name:e},t)},S.gameListByCategory=function(e,t,n){return b("GameListByCategory",{num_items_per_category:e,game_status_id:t},n)},S.gameListList=function(e){return b("GameListList",{},e)},S.gameListListGames=function(e,t){return b("GameListListGames",{game_list_id:e},t)},S.gameListListGamesByName=function(e,t){return b("GameListListGamesByName",{game_list_name:e},t)},S.gameListByMostPopular=function(e,t,n,r,s){return b("GameListByMostPopular",{start_date:e,end_date:t,first_item:n,num_items:r},s)},S.gameListByIdList=function(e,t,n){return b("GameListByIdList",{game_id_list:e,delimiter:t},n)},S.gameListCategoryList=function(e){return b("GameListCategoryList",{},e)},S.gameListListRecommendedGames=function(e,t){return b("GameListListRecommendedGames",{game_list_id:e},t)},S.gamePlayEventListByMostPlayed=function(e,t,n,r){return b("GamePlayEventListByMostPlayed",{start_date:e,end_date:t,num_items:n},r)},S.gameRatingGet=function(e,t){return b("GameRatingGet",{game_id:e},t)},S.gameRatingList=function(e,t,n){return b("GameRatingList",{game_id:e,num_items:t},n)},S.gameRatingUpdate=function(e,t,n){return b("GameRatingUpdate",{game_id:e,rating:t},n)},S.scoreSubmitUnauth=function(e,t,n,r,s,o,i){return b("ScoreSubmitUnauth",{game_id:e,session_id:S.sessionId,user_name:t,score:n,game_data:r,time_played:s,user_source:o},i)},S.scoreSubmit=function(e,t,n,r,s){var o,i,a,u,l,c,d,g,f,m="ScoreSubmit",V=S.sessionId,h="";return S.authTokenWasValidated&&0!=S.loggedInUserInfo.userId?null==V?h="INVALID_SESSION":k(e)&&k(e=S.gameId)&&(h="INVALID_GAME_ID"):h="NOT_LOGGED_IN",""==h&&(i=S.siteId,a=S.loggedInUserInfo.userId,u=e,l=t,c=n,d=r,g=V,f="site_id="+i.toString()+"&user_id="+a.toString()+"&game_id="+u.toString()+"&score="+l.toString()+"&game_data="+c+"&time_played="+d.toString(),console.log("Encrypting with "+g+" data "+f),null==(o=S.blowfish.encryptString(f,g))&&(h="INVALID_PARAM")),""==h?b(m,{data:o},s):y(m,0,h,"Error encountered while processing score submit.",s)},S.scoreRankList=function(e,t,n,r,s,o){return k(e)&&k(e=S.gameId)&&"INVALID_GAME_ID",k(t)&&(t=0),k(n)&&(n=0),k(r)&&(r=1),k(s)&&(s=100),b("ScoreRankList",{game_id:e,time_period_type:t,time_period:n,first_rank:r,num_ranks:s},o)},S.newsletterCategoryList=function(e){return b("NewsletterCategoryList",{},e)},S.newsletterAddressAssign=function(e,t,n,r,s){return b("NewsletterAddressAssign",{email_address:e,user_name:t,company_name:n,categories:r,delimiter:","},s)},S.newsletterAddressUpdate=function(e,t,n,r,s,o){return b("NewsletterAddressUpdate",{newsletter_address_id:e,email_address:t,user_name:n,company_name:r,active:s},o)},S.newsletterAddressDelete=function(e,t){return b("NewsletterAddressDelete",{email_address:e,newsletter_address_id:"NULL"},t)},S.newsletterAddressGet=function(e,t){return b("NewsletterAddressGet",{email_address:e},t)},S.promotionItemList=function(e,t,n){return b("PromotionItemList",{promotion_id:e,query_date:t},n)},S.promotionList=function(e,t,n,r){return b("PromotionItemList",{promotion_id:e,query_date:t,show_items:n},r)},S.recommendedGameList=function(e,t){return b("RecommendedGameList",{game_id:e},t)},S.registeredUserCreate=function(e,t,n,r,s,o,i,a,u,l,c,d,g,f,m,V,h,p,A,v,I,y,_,w,U){return b("RegisteredUserCreate",{site_id:siteId,captcha_id:k(_)?S.captchaId:_,captcha_response:k(w)?S.captchaResponse:w,user_name:e,site_user_id:f,network_id:m,real_name:r,password:t,dob:s,gender:o,city:i,state:a,zipcode:u,email_address:n,country_code:l,mobile_number:c,im_id:d,agreement:V,security_question_id:1,security_answer:"",img_url:"",about_me:v,tagline:g,additional_info:I,source_site_id:y},U)},S.registeredUserUpdate=function(e,t,n,r,s,o,i,a,u,l,c,d,g,f,m,V,h,p,A,v,I,y,_,w,U){return b("RegisteredUserUpdate",{site_id:siteId,captcha_id:k(_)?S.captchaId:_,captcha_response:k(w)?S.captchaResponse:w,user_name:e,real_name:r,dob:s,gender:o,city:i,state:a,zipcode:u,email_address:n,country_code:l,mobile_number:c,im_id:d,img_url:"",about_me:v,tagline:g,additional_info:I},U)},S.registeredUserSecurityUpdate=function(e,t,n,r,s,o){return b("RegisteredUserSecurityUpdate",{site_id:siteId,captcha_id:k(captchaId)?S.captchaId:captchaId,captcha_response:k(captchaResponse)?S.captchaResponse:captchaResponse,security_question_id:n,security_question:r,security_answer:s},o)},S.registeredUserConfirm=function(e,t,n){return b("RegisteredUserConfirm",{user_id:e,secondary_password:t},n)},S.registeredUserForgotPassword=function(e,t,n){return b("RegisteredUserForgotPassword",{user_name:e,email:t},n)},S.registeredUserResetSecondaryPassword=function(e,t,n){return b("RegisteredUserResetSecondaryPassword",{user_id:userid,secondary_password:t},n)},S.registeredUserRequestPasswordChange=function(e){return b("RegisteredUserRequestPasswordChange",{site_id:S.siteId},e)},S.registeredUserPasswordChange=function(e,t,n,r,s){return b("RegisteredUserPasswordChange",{site_id:siteId,captcha_id:k(captchaId)?S.captchaId:captchaId,captcha_response:k(captchaResponse)?S.captchaResponse:captchaResponse,password:n,secondary_password:r},s)},S.registeredUserSecurityGet=function(e){return b("RegisteredUserSecurityGet",{site_id:S.siteId,site_user_id:""},e)},S.registeredUserGet=function(e,t,n,r){return b("RegisteredUserGet",{get_user_id:e,site_user_id:t,network_id:n},r)},S.siteListGames=function(e,t,n,r){return(null==e||e<0)&&(e=1),(null==t||500<t)&&(t=500),(null==n||3<n)&&(n=2),b("SiteListGames",{first_item:e,num_items:t,game_status_id:n},r)},S.siteListGamesRandom=function(e,t){return(null==e||500<e)&&(e=500),b("SiteListGamesRandom",{num_items:e},t)},S.userGetByName=function(e,t){return b("UserGetByName",{user_name:e},t)},S.userLogout=function(e){return b("UserLogout",{},e)},S.userLogin=function(e,t,n){return b("UserLogin",{user_name:e,password:t},n)},S.userLoginCoreg=function(e,t,n){return void 0!==e.siteUserId&&0!=e.siteUserId.length&&((void 0!==e.userName&&0!=e.userName.length||void 0!==e.realName&&0!=e.realName.length)&&(void 0===e.userName&&(e.userName=""),void 0===e.realName&&(e.realName=""),void 0===e.gender||0==e.gender.length?e.gender="U":"M"!=e.gender&&"F"!=e.gender&&"U"!=e.gender&&(e.gender="U"),void 0===e.emailAddress&&(e.emailAddress=""),void 0===e.scope&&(e.scope=""),void 0===e.agreement&&(e.agreement="0"),void 0===e.idToken&&(e.idToken=""),void 0===e.avatarURL&&(e.avatarURL=""),void 0===e.dob||0==e.dob.length?(e.dob=new Date,e.dob=e.dob.toISOString().slice(0,9)):e.dob instanceof Date&&(e.dob=e.dob.toISOString().slice(0,9)),b("UserLoginCoreg",{site_user_id:e.siteUserId,user_name:e.userName,real_name:e.realName,email_address:e.emailAddress,gender:e.gender,dob:e.dob,network_id:t,scope:e.scope,agreement:e.agreement,avatar_url:e.avatarURL,id_token:e.idToken},n)))},S.avatarURL=function(e,t){return 0==t&&(t=S.loggedInUserInfo.userId),e<0?e=0:2<e&&(e=2),S.siteResources.avatarImageURL+"?site_id="+S.siteId+"&user_id="+t+"&size="+e},S.quizGet=function(e,t){return b("QuizGet",{game_id:e},t)},S.quizPlay=function(e,t,n){return b("QuizPlay",{game_id:e,game_group_id:t},n)},S.quizPlayScheduled=function(e,t,n){return b("QuizPlayScheduled",{game_id:e,game_group_id:t},n)},S.quizOutcomesCountList=function(e,t,n){return b("QuizOutcomesCountList",{game_id:e,game_group_id:t},n)},S.quizSubmit=function(e,t,n){return b("QuizSubmit",{game_id:e,results:t},n)},S.quizQuestionPlayed=function(e,t,n,r){return b("QuizQuestionPlayed",{game_id:e,question_id:t,choice_id:n},r)},S.isUserFavoriteGame=function(t,n){t=t||S.gameId;var e=S.favoriteGames.has(t);return s(n)||"function"!=typeof n||b("UserFavoriteGamesList",{},null).then(function(e){n(t,S.favoriteGames.has(t))}),e},S.userFavoriteGamesList=function(e){return b("UserFavoriteGamesList",{},e)},S.userFavoriteGamesAssign=function(e,t){return e=e||S.gameId,S.favoriteGames.add(e),b("UserFavoriteGamesAssign",{game_id:e},t)},S.userFavoriteGamesAssignList=function(e,t){for(var n=e.split(","),r=0;r<n.length;r++)S.favoriteGames.add(n[r]);return b("UserFavoriteGamesAssignList",{game_id_list:e,delimiter:","},t)},S.userFavoriteGamesUnassign=function(e,t){return e=e||S.gameId,S.favoriteGames.delete(e),b("UserFavoriteGamesUnassign",{game_id:e},t)},S.userFavoriteGamesUnassignList=function(e,t){for(var n=e.split(","),r=0;r<n.length;r++)S.favoriteGames.delete(n[r]);return b("UserFavoriteGamesUnassignList",{game_id_list:e,delimiter:","},t)},S.userFavoriteGamesMove=function(e,t,n){return b("UserFavoriteGamesMove",{game_id:e,sort_order:t},n)},S.anonymousUserSetDateLastVisit=function(){null==S.anonymousUser&&P(),S.anonymousUser.dateLastVisit=new Date},S.anonymousUserSetSubscriberEmail=function(e,t){var n;null==S.anonymousUser&&P(),void 0===t&&(t=!0),n=S.anonymousUser.subscriberEmail,(t&&e!=n||!t&&k(n))&&(S.anonymousUser.subscriberEmail=e,D())},S.anonymousUserGetSubscriberEmail=function(){return null==S.anonymousUser&&P(),S.anonymousUser.subscriberEmail},S.anonymousUserSetUserName=function(e,t){var n;null==S.anonymousUser&&P(),void 0===t&&(t=!0),n=S.anonymousUser.userName,(t&&e!=n||!t&&k(n))&&(S.anonymousUser.userName=e,D())},S.anonymousUserGetUserName=function(){return null==S.anonymousUser&&P(),S.anonymousUser.userName},S.anonymousUserSetId=function(e){null==S.anonymousUser&&P(),(void 0===S.anonymousUser.userId||S.anonymousUser.userId<1e4)&&(S.anonymousUser.userId=e,D())},S.anonymousUserGetId=function(){return null==S.anonymousUser&&P(),S.anonymousUser.userId||0},S.anonymousUserAddFavoriteGame=function(e){null==S.anonymousUser&&P(),S.anonymousUser.favoriteGames.add(e),D()},S.anonymousUserGamePlayed=function(e){null==S.anonymousUser&&P(),S.anonymousUser.gamesPlayed.add(e),D()},S.conferenceAssetRootPath=function(e){return"//"+S.serverHost+"/sites/"+siteId+"/conf/"+e+"/"},S.conferenceGet=function(e,t){var n;return 0<parseInt(e,10)?n="":(n=e,e=0),b("ConferenceGet",{conference_id:e,visible_id:n},t)},S.conferenceTopicGet=function(e,t,n){var r;return 0<parseInt(e,10)?r="":(r=e,e=0),b("ConferenceTopicGet",{conference_id:e,visible_id:r,conference_topic_id:t},n)},S.conferenceTopicList=function(e,t,n,r,s,o,i){var a;return 0<parseInt(e,10)?a="":(a=e,e=0),b("ConferenceTopicList",{conference_id:e,visible_id:a,tags:t,start_date:n,end_date:r,start_item:s,num_items:o},i)},"function"==typeof define&&define.amd)define(function(){return S});else if("object"==typeof exports)module.exports=S;else{var K=d.enginesis;S.existingEnginesis=function(){return d.enginesis=K,this},d.enginesis=S}}(this);